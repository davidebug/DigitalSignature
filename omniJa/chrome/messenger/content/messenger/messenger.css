/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */

/* ===== messenger.css ==================================================
  == Content specific styles for Messenger.
  ======================================================================= */

@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");

:root {
  --lwt-additional-images: none;
  --lwt-background-alignment: right top;
  --lwt-background-tiling: no-repeat;

  --toolbar-bgcolor: var(--toolbar-non-lwt-bgcolor);
  --toolbar-bgimage: var(--toolbar-non-lwt-bgimage);
  --toolbar-color: var(--toolbar-non-lwt-textcolor);
}

/* message header widgets */
.emailDisplayButton {
  -moz-user-focus: normal;
}

.emailStar {
  -moz-user-focus: normal;
}

.emailPopup {
  -moz-user-focus: normal;
}

mail-multi-emailHeaderField {
  -moz-binding: url("chrome://messenger/content/mailWidgets.xml#mail-multi-emailHeaderField");
}

mail-tagfield[collapsed="true"] {
  display: none;
}

#searchTermList > richlistitem {
  -moz-binding: url("chrome://messenger/content/searchWidgets.xml#filterlistitem");
}

searchattribute {
  -moz-binding: url("chrome://messenger/content/mailWidgets.xml#searchattribute");
}

searchoperator {
  -moz-binding: url("chrome://messenger/content/mailWidgets.xml#searchoperator");
}

searchvalue {
  display: -moz-deck;
  -moz-binding: url("chrome://messenger/content/mailWidgets.xml#searchvalue");
}

searchterm {
  -moz-binding: url("chrome://messenger/content/mailWidgets.xml#searchterm");
}

.ruleaction {
  -moz-binding: url("chrome://messenger/content/searchWidgets.xml#ruleaction");
}

.ruleactiontype {
  -moz-binding: url("chrome://messenger/content/searchWidgets.xml#ruleactiontype-menulist");
}

#searchInput {
  -moz-binding: url("chrome://messenger/content/search.xml#glodaSearch");
}

.remote-gloda-search {
  -moz-binding: url("chrome://messenger/content/search.xml#glodaSearch") !important;
}

.remote-gloda-search-container {
  min-width: 10em;
}

tabmail {
  -moz-binding: url("chrome://messenger/content/tabmail.xml#tabmail");
}

menupopup[type="folder"] {
  -moz-binding: url("chrome://messenger/content/folderWidgets.xml#folder-menupopup");
}

.addrbooksPopup {
  -moz-binding: url("chrome://messenger/content/addressbook/addrbookWidgets.xml#addrbooks-menupopup");
}

.map-list {
  -moz-binding: url("chrome://messenger/content/addressbook/addrbookWidgets.xml#map-list");
}

.chromeclass-toolbar {
  overflow-x: hidden;
}

/* Lightweight themes support */

:root:-moz-lwtheme {
  --toolbar-color: var(--lwt-text-color, inherit);

  background-color: var(--lwt-accent-color);
  color: var(--lwt-text-color);
}

:root:-moz-lwtheme[lwtheme-image] {
  background-image: var(--lwt-header-image) !important;
  background-repeat: no-repeat;
  background-position: right top !important;
}

:root:-moz-lwtheme:-moz-window-inactive {
  background-color: var(--lwt-accent-color-inactive, var(--lwt-accent-color));
}

/* Add a box to draw additional background images. */
#LW-background-box {
  display: none;
}

#LW-background-box:-moz-lwtheme {
  display: -moz-box;
  height: 60px;
  position: fixed;
  pointer-events: none;
  top: 0;
  width: -moz-available;
}

#messengerWindow[windowtype="mail:3pane"] > #LW-background-box:-moz-lwtheme {
  z-index: -1;
}

/* Set additional backgrounds alignment relative to toolbox.
   This rule needs to be in content to avoid CSP issues. */
#LW-background-box:-moz-lwtheme,
#ab-toolbox:-moz-lwtheme,
#compose-toolbox:-moz-lwtheme {
  background-image: var(--lwt-additional-images);
  background-position: var(--lwt-background-alignment);
  background-repeat: var(--lwt-background-tiling);
}

#status-bar:-moz-lwtheme {
  background-repeat: no-repeat, var(--lwt-background-tiling);
  background-position: bottom right, var(--lwt-background-alignment);
  background-color: var(--lwt-accent-color);
  background-image: var(--lwt-header-image), var(--lwt-additional-images);
  color: var(--lwt-text-color);
}

/* AppButton support */

splitmenu {
  -moz-binding: url("chrome://messenger/content/mailWidgets.xml#splitmenu");
}

.splitmenu-menuitem {
  -moz-binding: url("chrome://global/content/bindings/menu.xml#menuitem");
  list-style-image: inherit;
  -moz-image-region: inherit;
}

.splitmenu-menuitem[iconic="true"] {
  -moz-binding: url("chrome://global/content/bindings/menu.xml#menuitem-iconic");
}

.splitmenu-menu > .menu-text,
:-moz-any(.splitmenu-menu, .splitmenu-menuitem) > .menu-accel-container,
#appmenu-editmenu > .menu-text,
#appmenu-editmenu > .menu-accel-container {
  display: none;
}

#titlebar {
  -moz-window-dragging: drag;
}

#messengerWindow:not([chromemargin]) > #titlebar {
  display: none;
}

#titlebar-spacer {
  pointer-events: none;
}

.button-appmenu {
  -moz-binding: url("chrome://messenger/content/mailWidgets.xml#appmenu-vertical") !important;
}

toolbar[type="menubar"][autohide="true"] {
  overflow: hidden;
}

toolbar[type="menubar"][autohide="true"][inactive="true"]:not([customizing="true"]) {
  min-height: 0 !important;
  height: 0 !important;
  -moz-appearance: none !important;
}

/* WebExtensions icon-variables */

:root[lwthemeicons~="--getmsg-icon"] #button-getmsg:-moz-lwtheme {
  list-style-image: var(--getmsg-icon) !important;
}

:root[lwthemeicons~="--newmsg-icon"] #button-newmsg:-moz-lwtheme,
:root[lwthemeicons~="--newmsg-icon"] #button-newmessage:-moz-lwtheme {
  list-style-image: var(--newmsg-icon) !important;
}

:root[lwthemeicons~="--address-icon"] #button-address:-moz-lwtheme,
:root[lwthemeicons~="--address-icon"] #button-contacts:-moz-lwtheme {
  list-style-image: var(--address-icon) !important;
}

:root[lwthemeicons~="--reply-icon"] #button-reply:-moz-lwtheme,
:root[lwthemeicons~="--reply-icon"] #hdrReplyButton:-moz-lwtheme,
:root[lwthemeicons~="--reply-icon"] #hdrReplyToSenderButton:-moz-lwtheme {
  list-style-image: var(--reply-icon) !important;
}

:root[lwthemeicons~="--replyall-icon"] #button-replyall:-moz-lwtheme,
:root[lwthemeicons~="--replyall-icon"] #hdrReplyAllButton:-moz-lwtheme {
  list-style-image: var(--replyall-icon) !important;
}

:root[lwthemeicons~="--replylist-icon"] #button-replylist:-moz-lwtheme,
:root[lwthemeicons~="--replylist-icon"] #hdrFollowupButton:-moz-lwtheme,
:root[lwthemeicons~="--replylist-icon"] #hdrReplyListButton:-moz-lwtheme {
  list-style-image: var(--replylist-icon) !important;
}

:root[lwthemeicons~="--forwarding-icon"] #button-forward:-moz-lwtheme,
:root[lwthemeicons~="--forwarding-icon"] .hdrForwardButton:-moz-lwtheme {
  list-style-image: var(--forwarding-icon) !important;
}

:root[lwthemeicons~="--delete-icon"] .delete-button:-moz-lwtheme,
:root[lwthemeicons~="--delete-icon"] #button-delete:-moz-lwtheme,
:root[lwthemeicons~="--delete-icon"] #hdrTrashButton:-moz-lwtheme,
:root[lwthemeicons~="--delete-icon"] #button-abdelete:-moz-lwtheme,
:root[lwthemeicons~="--delete-icon"] #calendar-delete-button:-moz-lwtheme,
:root[lwthemeicons~="--delete-icon"] #task-delete-button:-moz-lwtheme,
:root[lwthemeicons~="--delete-icon"] #calendar-delete-task-button:-moz-lwtheme {
  list-style-image: var(--delete-icon) !important;
}

:root[lwthemeicons~="--junk-icon"] .junk-button:-moz-lwtheme,
:root[lwthemeicons~="--junk-icon"] #hdrJunkButton:-moz-lwtheme {
  list-style-image: var(--junk-icon) !important;
}

:root[lwthemeicons~="--print-icon"] #button-print:-moz-lwtheme,
:root[lwthemeicons~="--print-icon"] #calendar-print-button:-moz-lwtheme,
:root[lwthemeicons~="--print-icon"] #task-print-button:-moz-lwtheme {
  list-style-image: var(--print-icon) !important;
}

:root[lwthemeicons~="--stop-icon"] #button-stop:-moz-lwtheme {
  list-style-image: var(--stop-icon) !important;
}

:root[lwthemeicons~="--file-icon"] #button-file:-moz-lwtheme {
  list-style-image: var(--file-icon) !important;
}

:root[lwthemeicons~="--nextUnread-icon"] #button-nextUnread:-moz-lwtheme {
  list-style-image: var(--nextUnread-icon) !important;
}

:root[lwthemeicons~="--prevUnread-icon"] #button-previousUnread:-moz-lwtheme {
  list-style-image: var(--prevUnread-icon) !important;
}

:root[lwthemeicons~="--mark-icon"] #button-mark:-moz-lwtheme {
  list-style-image: var(--mark-icon) !important;
}

:root[lwthemeicons~="--tag-icon"] #button-tag:-moz-lwtheme,
:root[lwthemeicons~="--tag-icon"] #hdrTagButton:-moz-lwtheme {
  list-style-image: var(--tag-icon) !important;
}

:root[lwthemeicons~="--back-icon"] #button-goback:-moz-lwtheme {
  list-style-image: var(--back-icon) !important;
}

:root[lwthemeicons~="--forward-icon"] #button-goforward:-moz-lwtheme {
  list-style-image: var(--forward-icon) !important;
}

:root[lwthemeicons~="--compact-icon"] #button-compact:-moz-lwtheme {
  list-style-image: var(--compact-icon) !important;
}

:root[lwthemeicons~="--archive-icon"] #button-archive:-moz-lwtheme,
:root[lwthemeicons~="--archive-icon"] #hdrArchiveButton:-moz-lwtheme {
  list-style-image: var(--archive-icon) !important;
}

:root[lwthemeicons~="--chat-icon"] #button-chat:-moz-lwtheme {
  list-style-image: var(--chat-icon) !important;
}

:root[lwthemeicons~="--nextMsg-icon"] #button-nextMsg:-moz-lwtheme {
  list-style-image: var(--nextMsg-icon) !important;
}

:root[lwthemeicons~="--prevMsg-icon"] #button-previousMsg:-moz-lwtheme {
  list-style-image: var(--prevMsg-icon) !important;
}

:root[lwthemeicons~="--QFB-icon"] #qfb-show-filter-bar:-moz-lwtheme {
  list-style-image: var(--QFB-icon) !important;
}

:root[lwthemeicons~="--conversation-icon"] #button-showconversation:-moz-lwtheme,
:root[lwthemeicons~="--conversation-icon"] #hdrOpenConversationButton:-moz-lwtheme {
  list-style-image: var(--conversation-icon) !important;
}

:root[lwthemeicons~="--conversation-icon"] #button-showconversation:-moz-lwtheme {
  list-style-image: var(--conversation-icon) !important;
}

:root[lwthemeicons~="--app_menu-icon"] .button-appmenu:-moz-lwtheme {
  list-style-image: var(--app_menu-icon) !important;
}

:root[lwthemeicons~="--newcard-icon"] #button-newcard:-moz-lwtheme {
  list-style-image: var(--newcard-icon) !important;
}

:root[lwthemeicons~="--newlist-icon"] #button-newlist:-moz-lwtheme {
  list-style-image: var(--newlist-icon) !important;
}

:root[lwthemeicons~="--editcard-icon"] #button-editcard:-moz-lwtheme {
  list-style-image: var(--editcard-icon) !important;
}

:root[lwthemeicons~="--newim-icon"] #button-newim:-moz-lwtheme {
  list-style-image: var(--newim-icon) !important;
}

:root[lwthemeicons~="--send-icon"] #button-send:-moz-lwtheme {
  list-style-image: var(--send-icon) !important;
}

:root[lwthemeicons~="--spelling-icon"] #spellingButton:-moz-lwtheme {
  list-style-image: var(--spelling-icon) !important;
}

:root[lwthemeicons~="--attach-icon"] #button-url:-moz-lwtheme,
:root[lwthemeicons~="--attach-icon"] #button-attach:-moz-lwtheme {
  list-style-image: var(--attach-icon) !important;
}

:root[lwthemeicons~="--security-icon"] #button-security:-moz-lwtheme {
  list-style-image: var(--security-icon) !important;
}

:root[lwthemeicons~="--save-icon"] #button-save:-moz-lwtheme {
  list-style-image: var(--save-icon) !important;
}

:root[lwthemeicons~="--quote-icon"] #quoteButton:-moz-lwtheme {
  list-style-image: var(--quote-icon) !important;
}

:root[lwthemeicons~="--cut-icon"] #cut-button:-moz-lwtheme {
  list-style-image: var(--cut-icon) !important;
}

:root[lwthemeicons~="--copy-icon"] #copy-button:-moz-lwtheme {
  list-style-image: var(--copy-icon) !important;
}

:root[lwthemeicons~="--paste-icon"] #paste-button:-moz-lwtheme {
  list-style-image: var(--paste-icon) !important;
}

:root[lwthemeicons~="--buddy-icon"] #button-add-buddy:-moz-lwtheme {
  list-style-image: var(--buddy-icon) !important;
}

:root[lwthemeicons~="--join_chat-icon"] #button-join-chat:-moz-lwtheme {
  list-style-image: var(--join_chat-icon) !important;
}

:root[lwthemeicons~="--chat_accounts-icon"] #button-chat-accounts:-moz-lwtheme {
  list-style-image: var(--chat_accounts-icon) !important;
}

:root[lwthemeicons~="--calendar-icon"] #calendar-tab-button:-moz-lwtheme,
:root[lwthemeicons~="--calendar-icon"] #lightning-button-calendar:-moz-lwtheme {
  list-style-image: var(--calendar-icon) !important;
}

:root[lwthemeicons~="--tasks-icon"] #task-tab-button:-moz-lwtheme,
:root[lwthemeicons~="--tasks-icon"] #lightning-button-tasks:-moz-lwtheme {
  list-style-image: var(--tasks-icon) !important;
}

:root[lwthemeicons~="--synchronize-icon"] #calendar-synchronize-button:-moz-lwtheme,
:root[lwthemeicons~="--synchronize-icon"] #task-synchronize-button:-moz-lwtheme {
  list-style-image: var(--synchronize-icon) !important;
}

:root[lwthemeicons~="--newevent-icon"] #extractEventButton:-moz-lwtheme,
:root[lwthemeicons~="--newevent-icon"] #task-newevent-button:-moz-lwtheme,
:root[lwthemeicons~="--newevent-icon"] #hdrExtractEventButton:-moz-lwtheme,
:root[lwthemeicons~="--newevent-icon"] #calendar-newevent-button:-moz-lwtheme,
:root[lwthemeicons~="--newevent-icon"] #todaypane-new-event-button:-moz-lwtheme {
  list-style-image: var(--newevent-icon) !important;
}

:root[lwthemeicons~="--newtask-icon"] #extractTaskButton:-moz-lwtheme,
:root[lwthemeicons~="--newtask-icon"] #task-newtask-button:-moz-lwtheme,
:root[lwthemeicons~="--newtask-icon"] #hdrExtractTaskButton:-moz-lwtheme,
:root[lwthemeicons~="--newtask-icon"] #calendar-newtask-button:-moz-lwtheme,
:root[lwthemeicons~="--newtask-icon"] #calendar-add-task-button:-moz-lwtheme {
  list-style-image: var(--newtask-icon) !important;
}

:root[lwthemeicons~="--editevent-icon"] #calendar-edit-button:-moz-lwtheme,
:root[lwthemeicons~="--editevent-icon"] #task-edit-button:-moz-lwtheme {
  list-style-image: var(--editevent-icon) !important;
}

:root[lwthemeicons~="--today-icon"] #calendar-goto-today-button:-moz-lwtheme {
  list-style-image: var(--today-icon) !important;
}

:root[lwthemeicons~="--find-icon"] #calendar-unifinder-button:-moz-lwtheme {
  list-style-image: var(--find-icon) !important;
}

:root[lwthemeicons~="--category-icon"] #task-actions-category:-moz-lwtheme {
  list-style-image: var(--category-icon) !important;
}

:root[lwthemeicons~="--complete-icon"] #task-actions-markcompleted:-moz-lwtheme {
  list-style-image: var(--complete-icon) !important;
}

:root[lwthemeicons~="--priority-icon"] #button-priority:-moz-lwtheme,
:root[lwthemeicons~="--priority-icon"] #task-actions-priority:-moz-lwtheme {
  list-style-image: var(--priority-icon) !important;
}

:root[lwthemeicons~="--saveandclose-icon"] #button-saveandclose:-moz-lwtheme {
  list-style-image: var(--saveandclose-icon) !important;
}

:root[lwthemeicons~="--attendees-icon"] #button-attendees:-moz-lwtheme {
  list-style-image: var(--attendees-icon) !important;
}

:root[lwthemeicons~="--privacy-icon"] #button-privacy:-moz-lwtheme {
  list-style-image: var(--privacy-icon) !important;
}

:root[lwthemeicons~="--status-icon"] #button-status:-moz-lwtheme {
  list-style-image: var(--status-icon) !important;
}

:root[lwthemeicons~="--freebusy-icon"] #button-freebusy:-moz-lwtheme {
  list-style-image: var(--freebusy-icon) !important;
}

:root[lwthemeicons~="--timezones-icon"] #button-timezones:-moz-lwtheme {
  list-style-image: var(--timezones-icon) !important;
}

/* Rules to help integrate WebExtension buttons */

.webextension-action > .toolbarbutton-badge-stack > .toolbarbutton-icon {
  height: 16px;
  width: 16px;
}

@media not all and (min-resolution: 1.1dppx) {
  .webextension-action {
    list-style-image: var(--webextension-toolbar-image, inherit);
  }

  toolbar[brighttext] .webextension-action {
    list-style-image: var(--webextension-toolbar-image-light, inherit);
  }

  toolbar:not([brighttext]) .webextension-action:-moz-lwtheme {
    list-style-image: var(--webextension-toolbar-image-dark, inherit);
  }

  .webextension-action[cui-areatype="menu-panel"] {
    list-style-image: var(--webextension-menupanel-image, inherit);
  }

  :root[lwt-popup-brighttext] .webextension-action[cui-areatype="menu-panel"] {
    list-style-image: var(--webextension-menupanel-image-light, inherit);
  }

  :root:not([lwt-popup-brighttext]) .webextension-action[cui-areatype="menu-panel"]:-moz-lwtheme {
    list-style-image: var(--webextension-menupanel-image-dark, inherit);
  }

  .webextension-menuitem {
    list-style-image: var(--webextension-menuitem-image, inherit) !important;
  }
}

@media (min-resolution: 1.1dppx) {
  .webextension-action {
    list-style-image: var(--webextension-toolbar-image-2x, inherit);
  }

  toolbar[brighttext] .webextension-action {
    list-style-image: var(--webextension-toolbar-image-2x-light, inherit);
  }

  toolbar:not([brighttext]) .webextension-action:-moz-lwtheme {
    list-style-image: var(--webextension-toolbar-image-2x-dark, inherit);
  }

  .webextension-action[cui-areatype="menu-panel"] {
    list-style-image: var(--webextension-menupanel-image-2x, inherit);
  }

  :root[lwt-popup-brighttext] .webextension-action[cui-areatype="menu-panel"] {
    list-style-image: var(--webextension-menupanel-image-2x-light, inherit);
  }

  :root:not([lwt-popup-brighttext]) .webextension-action[cui-areatype="menu-panel"]:-moz-lwtheme {
    list-style-image: var(--webextension-menupanel-image-2x-dark, inherit);
  }

  .webextension-menuitem {
    list-style-image: var(--webextension-menuitem-image-2x, inherit) !important;
  }
}

/* Status bar */

window[sizemode="maximized"] .statusbar-resizerpanel {
  visibility: collapse;
}

/* Status panel */

statuspanel {
  position: fixed;
  margin-top: -3em;
  left: 0;
  z-index: 20;
  max-width: 50%;
  transition: opacity 100ms ease-out;
}

statuspanel:-moz-locale-dir(ltr)[mirror],
statuspanel:-moz-locale-dir(rtl):not([mirror]) {
  left: auto;
  right: 0;
}

statuspanel[label=""],
statuspanel:not([label]) {
  opacity: 0;
  pointer-events: none;
}

.statuspanel-inner {
  height: 3em;
  -moz-box-align: end;
}
